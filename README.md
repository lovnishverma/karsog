# Karsog.com - Valley Tourism & Business Directory

A hyper-local platform for Karsog Valley acting as a **Business Directory**, **Travel Portal**, and **News Aggregator**. 

Built with **HTML/CSS/JavaScript** on the frontend, powered by **Google Sheets** as the primary CMS, and enhanced with **Python/GitHub Actions** for automated news updates.

[Google Form for Listings](https://forms.gle/HrJppPH3BHZLSCPD7) | [Live Site](https://www.karsog.com)

## ðŸŒŸ Features

### Core Modules
* **Business Directory:** Real-time listings for Hotels, Taxis, Shops, and Services fetched from Google Sheets.
* **Travel Portal:** Dedicated section (`travel.html`) for tour packages, trekking guides (Shikari Devi), and luxury stays.
* **Analytics Dashboard:** A login-protected dashboard (`analytics.html`) for business owners to track profile views, calls, and WhatsApp clicks.
* **News Feed:** Automated hyper-local news aggregator (`assets/site_data.json`) fetching updates about Karsog/Himachal via GitHub Actions.

### User Experience
* **Live Weather:** Real-time weather widget using Open-Meteo API.
* **SEO Optimized:** Rich Schema.org structured data (LocalBusiness, TouristDestination, TravelAgency).
* **PWA Ready:** Service worker support for mobile installability.
* **Dark/Light Mode:** Persistent theme toggler across all pages.
* **Client-Side Search:** Instant filtering by category and keywords.

## ðŸ“‚ Project Structure

```text
/
â”œâ”€â”€ index.html          # Main Landing (Home, Directory Teaser, News, Weather)
â”œâ”€â”€ directory.html      # Full Business Directory Listing
â”œâ”€â”€ travel.html         # Travel Packages, Reviews, and Lead Forms
â”œâ”€â”€ analytics.html      # Business Owner Dashboard (Chart.js integration)
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ img/            # Static images
â”‚   â””â”€â”€ site_data.json  # Generated file containing latest News & cached data
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ fetch_data.py   # Python script to fetch News & Mongo data
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ update_data.yml # Cron job to run python script every 4 hours
â”œâ”€â”€ Code.gs             # Google Apps Script (The Backend API)
â””â”€â”€ requirements.txt    # Python dependencies
````

## ðŸš€ Setup Guide

### Phase 1: Google Sheets (The Database)

1.  Create a new [Google Sheet](https://sheets.new).
2.  Create three tabs named exactly: `Directory`, `Store`, and `stats`.

#### **Sheet 1: "Directory"**

| Col | Header | Description |
| :--- | :--- | :--- |
| A | Timestamp | Auto-filled by form |
| B | Name | Business Name |
| C | Category | `Hotel`, `Taxi`, `Shop`, `Food`, `Service` |
| D | Phone | Contact Number |
| E | Description | Short details |
| F | Address | Location |
| G | Rating | e.g., `4.5` |
| H | Featured | `TRUE`/`FALSE` |
| I | WhatsApp | Number (no `+`) |
| J-N | Image 1-5 | Image URLs |
| O | ID | **Unique ID** (Auto-generated by script) |

#### **Sheet 2: "Store"**

| Col | Header | Description |
| :--- | :--- | :--- |
| A | Title | Product Name |
| B | Price | Price (Number) |
| C | Image URL | Product Image |
| D | Buy Link | Affiliate URL |
| E | Badge | e.g., `Sale` |

#### **Sheet 3: "stats"** (For Analytics)

| Col | Header | Description |
| :--- | :--- | :--- |
| A | Timestamp | Date of action |
| B | Business ID | Matches ID in Directory Col O |
| C | Action Type | `view`, `phone`, `whatsapp` |
| D | Value | Usually `1` |

-----

### Phase 2: Deploy Google Apps Script (The API)

1.  Open your Google Sheet, go to **Extensions \> Apps Script**.
2.  Copy content from `Code.gs` in this repo and paste it there.
3.  **Deploy**:
      * Click **Deploy** \> **New Deployment**.
      * Select type: **Web App**.
      * Execute as: **Me**.
      * Who has access: **Anyone** (Essential).
4.  Copy the **Web App URL** (ends in `/exec`).

-----

### Phase 3: Frontend Connection

1.  Open `index.html`, `directory.html`, and `analytics.html`.
2.  Find the `SHEET_API_URL` constant and replace it with your Web App URL.

<!-- end list -->

```javascript
const SHEET_API_URL = "[https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec](https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec)";
```

-----

### Phase 4: News Automation (Implemented)

To enable the automated news feed:

1.  Get an API Key from [NewsAPI.org](https://newsapi.org).
2.  In your GitHub Repository, go to **Settings \> Secrets and variables \> Actions**.
3.  Add a New Repository Secret:
      * Name: `NEWS_API_KEY`
      * Value: `your_api_key_here`
4.  (Optional) If using MongoDB features in `fetch_data.py`, add `MONGO_URI`.
5.  The GitHub Action (`update_data.yml`) is scheduled to run every 4 hours. It will:
      * Fetch news related to "Karsog/Himachal".
      * Filter out spam keywords.
      * Update `assets/site_data.json`.
      * Commit the changes back to the repo.

## ðŸ›  Technologies Used

  * **Frontend:** HTML5, CSS3, JavaScript (ES6+).
  * **Libraries:** FontAwesome 6, Chart.js (Analytics), Google Fonts.
  * **Backend:** Google Apps Script (Serverless), Google Sheets (DB).
  * **Automation:** Python 3.9, GitHub Actions.
  * **External APIs:** NewsAPI, Open-Meteo (Weather).

## ðŸ“„ License

This project is proprietary.
